---
layout:     post
title:      "ARM裸机-ADC"
subtitle:   "ARM Tiny210 ADC"
date:       2017-03-03 19:00:00
author:     "陈登龙"
header-img: "img/post-bg-unix-linux.jpg"
catalog: true
tags:
    - ARM裸机
---

  
# ARM裸机-ADC  

**一，ADC简介**

Analog to Digital Converter (ADC) 模拟到数字转换器，用来将模拟信号转换为数字信号。
ADC的常见选型参数是：ADC的**位数和采样频率**，位数通常为10Bit或者12Bit，采样频率可以根据
实际的寄存器参数来配置，但是通常频率都不要过大。

本次只是简单的对ADC进行介绍。


**二，S5PV210的ADC**

这是S5PV210ADC的框图： 
![ADC][1]

S5PV210的ADC可支持**10bit和12bit**, 它支持**10路**输入,然后将输入的**模拟信号**转换为
10bit或者12bit的**二进制数字信号**。在 5MHz 的时钟下, 最大转换速率是 1MSPS。

这是ADC的外部电路图：
![ADC-PCB][2]

通道0的输入被接到可调电阻上,通过调节可调电阻, ADC能转换出不同的值。

**三，如何使用ADC**

ADC的使用比较简单，也是配置先寄存器，然后采集数据进行转换。

这是一个读取ADC值的函数：

``` c

/*
寄存器的地址定义
...
*/


/* 使用查询方式读取A/D转换值, 中断方式这里就不介绍了 */
int read_adc(int ch)
{
    /* 使能预分频功能，设置A/D转换器的时钟 = PCLK/(65+1) */
	TSADCCON0 = (1<<16) | (1 << 14) | (65 << 6);

    /* 清除位[2]，设为普通转换模式,禁止read start */
	TSADCCON0 &= ~((1<<2)|(1<<1));

	/* 选择通道, 使用的时候传递ch = 0,我们使用通道0 */
	ADCMUX = ch;

    /* 设置位[0]为1，启动A/D转换 */
	TSADCCON0 |= (1 << 0);

    /* 当A/D转换开始时，位[0]会自动清0，这里等待转换开始 */
	while (TSADCCON0 & (1 << 0));

    /* 检测位[15]，当它为1时表示转换结束, 这里等待转换结束 */
	while (!(TSADCCON0 &  (1 << 15)) );

    /* 读取数据，12Bit, 与0xFFF相与是为了取出12位的数据，因为我们配置ADC是12Bit */
	return (TSDATX0 & 0xfff);
}
```


对于开发来说，我们只需要会**使用ADC**即可，不需要深入了解他的原理。
ADC也是分种类的，比如：**积分型，逐次逼近型**，如果你有兴趣，可以去Google查找相关的资料。
ADC可以和触摸屏一起配合使用，在触摸屏上带有滑动变阻器，通过ADC转换将电阻值
转换成实际的坐标。


  [1]: https://cheng-zhi.github.io/img/ADC/post-2017-03-03-ADC.png
  [2]: https://cheng-zhi.github.io/img/ADC/post-2017-03-03-ADC-PCB.png
