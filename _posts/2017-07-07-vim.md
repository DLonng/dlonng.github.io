---
title: Google 大牛都在使用 vim，你竟然不会用？
date : 2017-07-07 12:00:00
---

# Google 大牛都在使用 vim，你竟然不会用？
***
> 版权声明：本文为 {{ site.name }} 原创文章，可以随意转载，但必须在明确位置注明出处！ 

## vim 简介

> vim 被称为编辑器之神

在 `Linux` 下我们经常使用 `vim` 来写程序，学会使用它可以说是学习 `Linux` 的必经之路。`Linux` 系统默认是安装了 `vi` 编辑器，而 `vim` 是 `vi` 的升级版，功能更强，所以我们更经常用 `vim`，这次就来介绍使用 `vim` 的正确姿势，废话不多说，先来安装 `vim`。

## 安装 vim
使用最简单的方法来安装：
```
sudo apt-get install vim
```

如果你有兴趣了解其他的安装方法，可以查看我之前更新的一篇文章：[如何在 Linux 上安装普通应用程序？](http://cheng-zhi.me/posts/linux-install-soft)


## 配置 vim
安装之后的默认的功能比较少，例如缺少语法高亮，打开行号，等等。但是这些功能都是可以配置的，因此我们需要了解如何配置 `vim`，其实是非常简单的，我们只需要更改 `vim` 的配置文件即可。

对于 `vim` 来说，我们有 2 种方法更改配置：
1. 更改 `vim` 系统配置文件：`/etc/vim/vimrc`
2. 更改当前用户的 `vim` 配置文件：`~/.vimrc`

为了不影响其他的用户，我这里就使用第二种方法，在当前用户的主目录下新建 `.vimrc` 隐藏文件，这样当 `vim` 启动时就会读取这个文件的配置信息。

> 在 Linux 下，前缀是 「.」的文件表示隐藏文件，使用 la 命令来查看当前目录全部文件

我的 `.vimrc` 文件中关于 `vim` 配置的内容如下（还有很多插件的配置信息就不列出了）：
```
set fenc=utf-8  "设定默认解码 
set nocp        "用于关闭 vi 的兼容模式
set number      "显示行号 
set ai          "使用自动对齐，也就是把当前行的对齐格式应用到下一行
set si          "智能的选择对齐方式
set tabstop=4   "设置 tab 键为 4 个空格
set sw=4        "设置当行之间交错时使用 4 个空格
set ruler       "设置在编辑过程中，于右下角显示光标位置的状态行
set incsearch   "设置增量搜索
set showmatch   "高亮显示匹配的括号
set matchtime=5 "匹配括号高亮时间
set fileencodings=utf-8,ucs-bom,gb18030,gbk,gb2312,cp936 "支持不同编码的文件，防止出现乱码
syntax on       "高亮语法
set backspace=indent,eol,start "防止退格键不能使用
```
配置完毕，重新使用 `vim` 打开文件，可以看到增加了很多实用的功能，写程序的效率也提高很多。当然，想要更进一步提高编程的效率，还需要安装一些插件，我后面会再写篇文章来介绍如何使用 `Vundle` 来安装插件，其实也很简单，有兴趣的可以先去 Google。

如果你是配置系统的 `sudo gedit /etc/vim/vimrc` 文件，你也只需要将上面的内容加到这个文件的尾部即可。

好了，基本配置完成了，但是如何使用啊？据说学会使用 `vim` 后基本不用鼠标了，是的，用 `vim` 写程序，键盘就可以搞定一切，可谓键盘在手，天下我有。

下面就来介绍 `vim` 的基本使用方法。

## 使用 vim

### vim 的 5 种常见模式
使用之前，需要先了解 `vim` 编辑器常用的 3 种模式：
1. 底行模式：先按 `ESC` 退出到默认状态，然后在编辑器中输入 [ : ] 即可进入该模式，主要用来保存，退出，替换这些功能
2. 命令模式：默认模式就是命令模式，可以输入例如 i，o，a，这些命令来进入编辑模式
3. 编辑模式：就是普通编辑器的模式，用来写程序的地方，在命令模式下，输入 i 即可进入编辑模式，还有其他进入编辑模式的方法，后面介绍
4. 字符可视模式 [ VISUAL ]：在命令模式下按 [ v ] 即可进入该模式，主要用于字符的复制，粘贴等
5. 块可视模式 [ VISUAL - BLOCK ]：在命令模式下按 [ Ctrl + v ] 即可进入该模式，主要用于块字符的操作，例如块注释

**不论什么模式，都可以按 `ESC` 来退回到默认的状态，务必记住。**


### 学习 vim 有这张图就够了
这张图包含了使用 `vim` 一些常用的命令，学会了这张图，你使用 `vim` 就没有多大的问题了。

![vim](http://cheng-zhi.me/images/vim.png)

下面就一起解读一下这张图。

#### 1. Command mode
该模式是命令模式，我比较常用的命令有下面一些，我建议你看的同时自己实践练习。

**光标**：我使用上下左右来移动光标，[ ^ ] 移动光标到行首，[ $ ] 移动到行尾。

**插入**：使用 [ i ] 在当前光标的前面插入，[ a ] 在光标后面插入，[ I ] 和 [ A ] 分别在行首和行尾插入，另外补充一个，[ o ] 在下一行插入，[ O ] 在上一行插入。

**删除**：使用 [ x ] 删除当前光标所在的字符，[ dw ] 删除一个单词，[ dd ] 删除一行，[ ndd ] 删除 n 行。

**查找**：使用 [ / ] 来查找文本，比如查找 hello，输入 [ /hello ]，然后回车即可看到结果，按 [ n ] 查看下一个结果，按 [ N ] 查看上一个结果。

**复制**：使用 [ yy ] 来复制一行，使用 [ nyy ] 来复制 n 行，使用 [ p ] 来粘贴。

**撤销**：使用 [ u ] 来撤销上一次的操作，使用 [ . ] 来反撤销。

**进入底行模式**：也称为扩展模式，输入 [ : ] 即可进入。

**定位到某行**：使用 [ gg ] 定位到文件首行，[ G ] 定位到文件末尾，[ nG ] 定位到第 n 行。

**翻页**：使用 [ Ctrl + f ] 向前翻一页，使用 [ Ctrl + b ] 向后翻一页。

#### 2. Ex mode
该模式即底行模式，主要用于保存，退出，替换等功能，我比较常用的命令有下面这些：

**保存退出**：[ :w ] 保存，[ :w! ] 也是保存，[ :q ] 退出，[ :q! ] 不保存退出，[ :wq! ] 不保存退出，[ :wq ] 保存退出，最常用。

**替换**：[ :%s/old/new/gc ] 用 new 来替换 old，[ c ] 表示每次替换都要用户确定是否替换，如果不加 c，则立刻全局替换。

#### 3. Edit mode
该模式即编辑模式，使用 Command mode 中介绍的插入命令即可进入该模式，在该模式下没有啥技巧，就跟普通编辑器一样。


好了，常用的命令都介绍完了，不知道你实践了没有，学习使用 `vim` 不是看看博客就能学会的，关键是你要自己去练习，只要你能坚持每天都敲这些命令，养成你自己的习惯，形成肌肉记忆，与键盘融为一体，我相信你的编程效率会提高很多，因为你解放了一只使用鼠标的手。

### 一些 vim 小技巧
这里我介绍几个常用的 `vim` 的小技巧，其实也算是命令，只不过不在上面的图中，这些命令我也经常使用。

**可视化复制，剪切，删除**：在命令模式下键入 [ v ] 进入 [ VISUAL ] 模式，然后使用方向键可以选择文本，之后使用 y，d，c 分别对选择的文本进行复制，删除，剪切操作，这样就解决了一次只能复制和删除一行或多行的限制了。

**添加多行注释**：这个功能 IDE 也有，在 `vim` 中也可以添加多行注释，先使用 [ Ctrl + v ] 进入 [ VISUAL - BLOCK ] 模式，然后上下选择要注释的多行，选择完后按**大写的 I** 来插入注释使用的字符，例如 #，然后**按 `ESC` 键**，大约**等待 1 s** 即可看到选择的多行已经被注释了。

**如何取消多行注释呢**？同样也是先进入 [ VISUAL - BLOCK ] 模式，上下选择取消注释的多行，然后按左右键将要删除的注释字符也选择上，然后按 d 删除注释字符即可。这个操作描述起来有些复杂，但是实际操作其实挺简单的，要多加练习，如果实在不能明白，可以去 Google 上查找相关的 Gif 图片或者视频。

**格式化代码**：IDE 一般都有格式化代码的快捷键，`vim` 怎么可能没有，在命令模式下先按 [ gg ] 定位到行首，然后键入下面的命令：[ shift + v + g + = ]，意思是先按**大写的 VG**来全选文本，然后按 [ = ] 即可格式化全部代码。

**如何格式化部分代码呢**？使用 [ v ] 来进入 [ VISUAL ] 模式，然后方向键选择要格式化的代码区域，之后按下 [ = ] 即可格式化。


## 总结
本次主要介绍了 `vim` 的基本使用方法和一些小技巧，`vim` 真正强大的地方在于它有很多好用的插件，我后续会更新如何使用 `Vundle` 来为 `vim` 安装炫酷的插件，可以先看看我安装完插件后的 `vim`，是不是瞬间高大上了，我看你骨骼惊奇，一定能够学会，期待后面与你相见 :)

![myvim](http://upload-images.jianshu.io/upload_images/4613385-d120c127498489f1.png?imageMogr2/auto-orient/strip%7CimageView2/2/w/1240)


