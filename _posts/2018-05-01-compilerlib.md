---
title: 分享点编译第三方库的经验
date: 2018-05-01 21:00:00
---
# 分享点编译第三方库的经验
***
> 版权声明：本文为 {{ site.name }} 原创文章，可以随意转载，但必须在明确位置注明出处！

在毕设项目中需要使用一个开源 3D 渲染引擎 OSG 库，既然是第三方库那么基本上是需要自己编译的，倒不是说必须的，而是最好是自己编译，为什么呢？

因为官方编译的版本不一定适合你的机器，在你的机器上运行用你自己机器编译的版本是最好的了，所以在使用第三方库时最好自己编译一份，以免在开发调试过程中出现一些莫名其妙的错误，那样会严重影响效率和自己的心情。

因为之前也很少使用第三方库，之前也就使用过 boost 库吧，但是编译 boost 库还是挺简单的，只需要在命令行键入几行命令就可以了。但是这次编译 OSG 库还稍微有点麻烦，因为对这个库不太熟悉，所以我就没有使用命令行而是使用 cmake 直接图形化编译了。编译了好几次，最后算是编译成功了，这里总结了点经验，虽然不一定适合所有库的编译，但是最起码是我经过实践总结的，应该可以提供一些参考作用。

## 确定库的平台
这个非常重要，直接决定了你能不能使用编译出来的库。你要提前搞清楚你的项目位数，确定是编译 32 位版本还是 64 位版本。我的建议是**尽量编译 32 位版本**的库，因为兼容性要好一点，麻烦会少很多，但是实际情况还需要你自己取舍，这只是我的建议，千万不要一概而论了。

## 确定编译器平台
在 win 下主要使用 VC++ 编译器，而 VC++ 编译器也分为 32 位和 64 位，在选择的时候一定要跟库的版本对应，即：
1. 编译 32 位版本用 32 位编译器
2. 编译 64 位版本用 64 位编译器

在 Linux 下用 gcc 也是一样的道理，很多时候最后的编译出错都是因为没有注意到这些细节，所以配置时一定要注意了，毕竟编译一次很耗时间的，争取一次通过。

## 确定第三方库的平台
有些库的编译依赖第三方库，例如 OSG，在 cmake 配置的时候需要指定这个第三方库，并且仍然要注意使用**对应平台**的第三方库，即：
1. 编译 32 位库使用 32 位第三方库
2. 编译 64 位库使用 64 位第三方库

总之，平台对应是很重要的，直接影响到你能不能编译成功和使用。

## 确定第三方库的路径
这个非常容易出错，在配置第三方库的路径时一定要选到含有 include，bin，lib 这些文件夹的路径下，否则也很容易报错找不到第三方库，进而导致编译失败。

例如这是 OSG 第三方库的正确路径：
![osg]({{ site.url }}/images/compilerlib/libpath.png)

## 注意库的安装路径
在配置时需要选择库的安装路径，建议你最好选择非系统盘，在 Linux 下选择当前用户有权限访问的文件夹。因为安装的时候如果没有安装路径的访问权限，就会安装失败的，请一定注意了！

## 使用注意事项
在使用编译出来的库时要注意，用什么编译器来编译库，就用什么编译器来编译你的项目。例如我使用 VS2015_x86 来编译 OSG，那么我在 Qt 中使用的时候也要使用 MSVC2015_x86 编译套件的 Qt，否则也是使用不了的，即**编译库和使用库的编译器要相同**。

就这几点经验吧，有需要具体编译 OSG 库的过程的可以看看我之前的[这篇文章]({{ site.url }}/posts/qt-osg)。

> {{ site.prompt }}

<div  align="center">
<img src="{{ site.url }}/images/wechart.jpg" width = "200" height = "200"/>
