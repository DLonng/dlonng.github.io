---
layout:     post
title:      "DDR-内存模型"
subtitle:   "S5PV210 DDR MemMode"
date:       2017-03-11 11:00:00
author:     "陈登龙"
header-img: "img/post-bg-ddr.jpg"
catalog: true
tags:
    - DDR
---

# DDR-内存模型

**一，DRAM如何保存一位数据**

下面是SDRAM中保存一位数据的模型图：
![DDR Bit Mode][1]

通过对地址的解析，解析出行地址和列地址，然后在**MemoryArray**中定位到一个电容，读取电容的值(1或者0)到Sense Amps中，然后送到Data In/Out Buffers中，最后送到数据总线上。

**二，DRAM如何保存1Byte数据**

这里先介绍**bank**的定义：将多个MemoryArray组合在一起就构成一个bank，例如将8个MemoryArray叠加在一起，每次给定一个地址，按照解析一位的方式解析出8个位，然后组成1Byte的数据，送到Data Buffers中，最后送到Data Bus中。
![Bank][2]

**三，进一步组成Memory Device**

将多个bank组合在一起就构成一块Memory Deivce：
![Memory Device][3]

数据在每个bank中连续存储，例如存储1Byte，**每次从每个bank中取出一个位**，因为DRAM在每次读取后需要刷新并重新充电，所以之前的bank就可以进行重新充电，可以提高效率。


**四，再来看看什么是Rank**

一个Rank上可以有多个Memory Device，一个Rank中的MD共用AddrBus和CtlBus，而数据总线分配到每个MD上，例如下图：
![Rank][4]

由Rank引出的**DIMM**定义：一个DIMM可以有两块Rank，Rank0和Rank1,不一定是这个顺序。
![DIMM][5]


**五，完整的模型**

如下图：
![DRAM Mode][6]


这是S5PV210的内存模型：
![V210][7]
可以看出：

**1.** 2个Rank是共用地址，控制，数据总线，他们通过CS来选择。

**2.** 每个Rank中的MD共用地址和控制总线，而数据总线则平均分配(32 / 4 = 8)

**3.** Rank通过Memory Controller来控制



  [1]: https://cheng-zhi.github.io/img/DDR/post-2017-3-11-DDRBit.png
  [2]: https://cheng-zhi.github.io/img/DDR/post-2017-3-11-Bank.png
  [3]: https://cheng-zhi.github.io/img/DDR/post-2017-3-11-MemDevice.png
  [4]: https://cheng-zhi.github.io/img/DDR/post-2017-3-11-Rank.png
  [5]: https://cheng-zhi.github.io/img/DDR/post-2017-3-11-DIMM.png
  [6]: https://cheng-zhi.github.io/img/DDR/post-2017-3-11-DRAMMode.png
  [7]: https://cheng-zhi.github.io/img/DDR/post-2017-3-11-V210.png
